<script>
  // Use your actual Render URL here:
  const ORA_API_BASE = "https://orbital-risk-authority.onrender.com";  // <-- example, replace

  async function loadGlobalRiskSummary() {
    const target = document.getElementById("ori-global-summary");
    if (!target) return;

    try {
      const res = await fetch(ORA_API_BASE + "/ori/global-summary");
      if (!res.ok) {
        target.textContent = "Unable to load ORI global summary (API error).";
        return;
      }
      const data = await res.json();

      let html = "";
      html += `<p><strong>Overall Risk Score:</strong> ${data.overall_risk_score.toFixed(1)} (${data.overall_risk_level})</p>`;
      html += "<table style='width:100%; border-collapse:collapse; margin-top:0.75rem; font-size:0.9rem;'>";
      html += "<thead><tr>";
      html += "<th style='text-align:left; padding:0.4rem 0;'>Orbit Band</th>";
      html += "<th style='text-align:left; padding:0.4rem 0;'>ORI Score</th>";
      html += "<th style='text-align:left; padding:0.4rem 0;'>Level</th>";
      html += "<th style='text-align:left; padding:0.4rem 0;'>Notes</th>";
      html += "</tr></thead><tbody>";

      for (const band of data.orbit_bands) {
        html += "<tr>";
        html += `<td style='padding:0.3rem 0;'>${band.band_name}</td>`;
        html += `<td style='padding:0.3rem 0;'>${band.risk_score.toFixed(1)}</td>`;
        html += `<td style='padding:0.3rem 0;'>${band.risk_level}</td>`;
        html += `<td style='padding:0.3rem 0;'>${band.notes}</td>`;
        html += "</tr>";
      }

      html += "</tbody></table>";
      target.innerHTML = html;
    } catch (err) {
      console.error(err);
      target.textContent = "Unable to load ORI global summary (network error).";
    }
  }

  document.addEventListener("DOMContentLoaded", loadGlobalRiskSummary);
</script>

